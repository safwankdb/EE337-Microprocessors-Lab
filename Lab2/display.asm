LED	EQU P1
ORG 00H
LJMP MAIN

ORG 100H
DELAY:
	USING 0		;ASSEMBLER DIRECTIVE TO INDICATE REGISTER BANK0
        PUSH PSW
        PUSH AR1	; STORE R1 (BANK O) ON THE STACK
        PUSH AR2
		PUSH AR3
        MOV R3, #20
		BACK0:
			MOV R2,#200
			BACK1:
				MOV R1,#0FFH
				BACK2:
					DJNZ R1, BACK2
				DJNZ R2, BACK1
			DJNZ R3, BACK0

		POP AR3
		POP AR2
        POP AR1
        POP PSW
        RET	

DISPLAY:
	USING 0
		PUSH PSW
		PUSH AR1
		PUSH AR2
		PUSH ACC
		MOV 50H, #5
		MOV 51H, #52H
		MOV R2, 50h
		MOV R1, 51h
		REPEAT:
			MOV A, @R1
			ANL A, #0FH
			RL A
			RL A
			RL A
			RL A
			MOV LED, A
			LCALL DELAY
			INC R1
			DJNZ R2, REPEAT
		POP ACC
		POP AR2
		POP AR1
		POP PSW
		RET
	
MAIN:
	LCALL DISPLAY

STOP: SJMP STOP
END
